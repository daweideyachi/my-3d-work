<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D æ¨¡å‹è°ƒè¯•æ¨¡å¼</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    <style>
        body { margin: 0; background: #eee; font-family: monospace; }
        model-viewer { width: 100%; height: 60vh; background: #fff; }
        #debug-log { 
            padding: 20px; 
            background: #333; 
            color: #0f0; 
            height: 40vh; 
            overflow-y: auto; 
            font-size: 14px;
        }
        .error { color: #ff5555; font-weight: bold; }
        .success { color: #55ff55; }
    </style>
</head>
<body>

    <model-viewer 
        id="mv"
        src="./model.glb" 
        camera-controls 
        auto-rotate 
        shadow-intensity="1" 
        ar>
    </model-viewer>

    <div id="debug-log">
        <h3>ğŸ” è¯Šæ–­æ—¥å¿—</h3>
        <p>æ­£åœ¨å°è¯•åŠ è½½æ¨¡å‹...</p>
    </div>

    <script>
        const viewer = document.getElementById('mv');
        const log = document.getElementById('debug-log');

        function print(msg, type = '') {
            const p = document.createElement('p');
            p.innerHTML = msg;
            if(type) p.className = type;
            log.appendChild(p);
        }

        // 1. æ‰“å°å½“å‰ç½‘é¡µåœ°å€
        print(`å½“å‰ç½‘é¡µä½ç½®: <br>${window.location.href}`);

        // 2. æ‰“å°æ¨¡å‹å®Œæ•´è¯·æ±‚åœ°å€
        // ç­‰å¾…ä¸€å°ä¼šå„¿ç¡®ä¿è§£æå®Œæˆ
        setTimeout(() => {
            const fullUrl = new URL(viewer.getAttribute('src'), window.location.href).href;
            print(`æ­£åœ¨è¯·æ±‚æ¨¡å‹åœ°å€: <br><a href="${fullUrl}" style="color:yellow" target="_blank">${fullUrl}</a>`);
            print(`ğŸ‘† ç‚¹å‡»ä¸Šé¢è¿™ä¸ªé»„è‰²é“¾æ¥ã€‚å¦‚æœä½ çœ‹åˆ°ä¹±ç æˆ–ä¸‹è½½æ–‡ä»¶ï¼Œè¯´æ˜è·¯å¾„æ˜¯å¯¹çš„ã€‚å¦‚æœçœ‹åˆ° 404ï¼Œè¯´æ˜æ–‡ä»¶ä¸åœ¨é‚£é‡Œã€‚`);
        }, 500);

        // 3. ç›‘å¬åŠ è½½é”™è¯¯
        viewer.addEventListener('error', (e) => {
            print(`âŒ åŠ è½½å¤±è´¥ (Error Event Triggered)`, 'error');
            print(`å¯èƒ½åŸå› ï¼š<br>1. ç¼ºå°‘ .nojekyll æ–‡ä»¶<br>2. æ–‡ä»¶åå¤§å°å†™ä¸åŒ¹é…<br>3. GitHub è¿˜æ²¡åŒæ­¥å®Œï¼ˆè¯·ç­‰5åˆ†é’Ÿï¼‰`, 'error');
        });

        // 4. ç›‘å¬åŠ è½½è¿›åº¦
        viewer.addEventListener('progress', (e) => {
            if(e.detail.totalProgress === 1) {
                print(`âœ… æ¨¡å‹åŠ è½½æˆåŠŸï¼`, 'success');
            }
        });
    </script>
</body>
</html>
